{"info":{"metadataVersion":"V2","version":"5.0.4","creationDate":1574661458535,"lastModified":1589011552929},"componentType":"FLOW","wrapperType":"TRAIN","summaryOption":false,"confirmationType":"v1","formLayout":{"labelEdge":"top","maxColumns":1},"swaggerUrls":[{"url":"http://mum00boa.in.oracle.com:18777/swagger/json/openapi.json","version":" v1","nickName":"Default_API"}],"flowType":"Create","flowImplicitName":"add-money-to-wallet","reviewLayout":"vanilla","components":[{"restFlow":"[{\"rests\":[\"/payments/transfers/self post Default_API v1\"],\"child\":[]},{\"rests\":[\"/payments/transfers/internal post Default_API v1\"],\"child\":[]},{\"rests\":[\"/payments/merchants get Default_API v1\"],\"child\":[]},{\"rests\":[\"/instructions/payins post Default_API v1\"],\"child\":[]},{\"rests\":[\"/accounts/demandDeposit get Default_API v1\"],\"child\":[]},{\"rests\":[\"/wallets/transfer/external post Default_API v1\"],\"child\":[]},{\"rests\":[\"/accessPoints get Default_API v1\"],\"child\":[]}]","data":{"externalMappedParams":[],"initRests":["/payments/merchants get Default_API v1","/accounts/demandDeposit get Default_API v1","/accessPoints get Default_API v1"],"css":".details{\n   .lable-spacing\n  {\n\t\tpadding: 10px 10px 0.5rem 10px;\n   }\n   .item-spacing\n  {\n    padding: 0 10px 1rem 10px;\n  }\n  .amount-spacing{\n    padding:0px;\n  }\n  .limits{\n    font-size: 12px;\n    font-weight: 400;\n  }\n  .maincontainer\n  {\n    padding: 2rem 0rem 0rem 0rem;\n\n  }\n  .helpcontainer\n  {\n    padding: 2rem 0rem 0rem 0rem;\n  }\n}\n","componentHeader":"Add Money To Wallet","validationTrackerID":"'Add_Money'","stageName":"Money","contracts":[{"buttonName":"primary","imgSource":"icons icon-submit","nameholder":"Submit","selectionType":"custom","functionName":"submit","slotType":"startIcon"},{"buttonName":"secondary","imgSource":"icons icon-back-arrow","nameholder":"Back","selectionType":"custom","functionName":"back","slotType":"startIcon"},{"buttonName":"tertiary","imgSource":"icons icon-cancel","nameholder":"Cancel","selectionType":"cancel","functionName":"cancel","slotType":"startIcon"}]},"layout":[{"nameholder":"Money","hidePageHeading":true,"valueClasses":"''","grid":{"layout":true,"flexItemClass":"details","flexItemsPad":true},"componentID":"Money27","type":"PageSection","children":[{"nameholder":"Transfer Type","mappedValue":"transfer","use":"ObservableVariable","isReadOnly":true,"optionList":{"optionSource":"custom","options":[{"value":"'myaccounts'","description":"My Accounts"},{"value":"'request'","description":"Request from Wallet"},{"value":"'external'","description":"External Sources"}]},"valueClasses":"''","grid":{"flex":true,"layout":true,"flexItemClass":"oj-sm-12 oj-md-12 oj-lg-12 banner","label":true,"flexLabelClass":"oj-sm-12 oj-md-12 oj-lg-12 banner","flexItemsPad":true},"componentID":"'TransferType99'","type":"RadioButton"},{"conditionalExpression":{"conditionalValue":"x1==='myaccounts'","selectedControllingField":["Transfer Type"]},"containerType":"NormalContainer","template":"Container","valueClasses":"''","grid":{"flex":true,"layout":true,"flexItemClass":"oj-sm-12 maincontainer","flexItemsPad":true},"componentID":"Container71","type":"Container","children":[{"containerType":"NormalContainer","template":"Container","valueClasses":"''","grid":{"flex":true,"layout":true,"flexItemClass":"oj-lg-8"},"componentID":"Container97","type":"Container","children":[{"nameholder":"Transfer From","additionalDetails":"transferFromAdditionalDetail","rest":"/payments/transfers/self","method":"post","mappedValue":".debitAccountId.value","payloadPrefix":"modelInstance.paymentstransfersselfpostv1payload","use":"PayloadProperty","isReadOnly":true,"customURL":"customUrl","extraDetails":"balance","valueClasses":"''","grid":{"layout":true,"flexItemClass":"oj-sm-12 oj-md-12 oj-lg-6 amount-spacing","flexItemsPad":true},"componentID":"TransferFrom2","type":"AccountInput"},{"nameholder":"Transfer To","valueClasses":"''","tagType":"Label","textBindingOption":"NLS","grid":{"layout":true,"flexItemClass":"lable-spacing oj-sm-12 oj-md-12 oj-lg-12","flexItemsPad":true},"componentID":"TransferTo24","type":"Text"},{"nameholder":"Wallet","valueClasses":"''","tagType":"Div","textBindingOption":"NLS","grid":{"layout":true,"flexItemClass":"item-spacing oj-sm-12 oj-md-12 oj-lg-12","flexItemsPad":true},"componentID":"Wallet64","type":"Text"},{"nameholder":"Amount","rest":"/payments/transfers/self","method":"post","mappedValue":".amount.amount","payloadPrefix":"modelInstance.paymentstransfersselfpostv1payload","use":"PayloadProperty","stageId":"add-money-to-wallet-stage1","source":"'form-input'","isRequiredField":true,"extraDetails":"amount.currency","idAttribute":"'amount'","valueClasses":"''","grid":{"layout":true,"flexItemClass":"oj-sm-12 oj-md-12 oj-lg-6 amount-spacing","flexItemsPad":true},"componentID":"Amount60","type":"AmountInput"},{"nameholder":"Note","isReadOnly":true,"valueClasses":"''","tagType":"Label","textBindingOption":"NLS","grid":{"layout":true,"flexItemClass":"oj-sm-12 oj-md-12 oj-lg-12","flexItemsPad":true},"componentID":"Note27","type":"Text"},{"nameholder":"Note","hideLabel":true,"rest":"/payments/transfers/self","method":"post","mappedValue":".remarks","payloadPrefix":"modelInstance.paymentstransfersselfpostv1payload","use":"PayloadProperty","isReadOnly":true,"validationExpression":{"validationType":"DATA_TYPES","selectedValidation":"ALPHANUMERIC_WITH_SPECIAL","minLength":"0","maxLength":"80","message":"Invalid data"},"customAttribute":[{"attribute":"aria-label","value":"$component.nls.Money.Note","colon":true}],"valueClasses":"''","grid":{"layout":true,"flexItemClass":"oj-sm-12 oj-md-12 oj-lg-6 item-spacing","flexItemsPad":true},"componentID":"'Note39'","type":"InputBox"}]},{"conditionalExpression":{"conditionalValue":"$baseModel.large()"},"panelContent":"Add money to wallet instantly from your linked Bank Account, request funds from other wallet users or add funds using your debit/credit cards or netbanking of any other bank account. You can easily send money to your friends, recharge your phone, pay bills and much more through the amount added to your Wallet.","imgSource":"info-icon/benefits.svg","header":"Transferring money has never been easier!","template":"add-wallet-money","valueClasses":"''","grid":{"layout":true,"flexItemClass":"oj-lg-4"},"componentID":"addwalletmoney18","type":"HelpPanel"}]},{"conditionalExpression":{"conditionalValue":"x1==='request'","selectedControllingField":["Transfer Type"]},"containerType":"NormalContainer","template":"Container","valueClasses":"''","grid":{"layout":true,"flexItemClass":"oj-sm-12 maincontainer","flexItemsPad":true},"componentID":"Container28","type":"Container","children":[{"containerType":"NormalContainer","template":"Container","valueClasses":"''","grid":{"flex":true,"layout":true,"flexItemClass":"oj-lg-8"},"componentID":"Container92","type":"Container","children":[{"nameholder":"Requestee's Mobile Number","valueClasses":"''","tagType":"Label","textBindingOption":"NLS","grid":{"layout":true,"flexItemClass":"lable-spacing oj-sm-12 oj-md-12 oj-lg-12","flexItemsPad":true},"componentID":"RequesteesMobileNumber49","type":"Text"},{"nameholder":"Request Mobile Number","hideLabel":true,"rest":"/instructions/payins","method":"post","mappedValue":".mobileNumber","payloadPrefix":"modelInstance.instructionspayinspostv1payload","use":"PayloadProperty","isReadOnly":true,"validationExpression":{"validationType":"OBDX_LOCALE","selectedValidation":"MOBILE_NO"},"customAttribute":[{"attribute":"aria-label","value":"$component.nls.Money.RequesteesMobileNumber","colon":true}],"valueClasses":"''","grid":{"layout":true,"flexItemClass":"oj-sm-12 oj-md-12 oj-lg-7 item-spacing","flexItemsPad":true},"componentID":"'RequestMobileNumber42'","type":"InputBox"},{"nameholder":"Amount","rest":"/instructions/payins","method":"post","mappedValue":".amount.amount","payloadPrefix":"modelInstance.instructionspayinspostv1payload","use":"PayloadProperty","stageId":"add-money-to-wallet-stage1","source":"'form-input'","isRequiredField":true,"extraDetails":"amount.currency","idAttribute":"'amount'","valueClasses":"''","grid":{"layout":true,"flexItemClass":"oj-sm-12 oj-md-12 oj-lg-7 amount-spacing","flexLabelClass":"oj-sm-12 oj-md-12 oj-lg-12","flexItemsPad":true},"componentID":"Amount74","type":"AmountInput"},{"nameholder":"Note","isReadOnly":true,"valueClasses":"''","tagType":"Label","textBindingOption":"NLS","grid":{"layout":true,"flexItemClass":"lable-spacing oj-sm-12 oj-md-12 oj-lg-12","flexItemsPad":true},"componentID":"Note2","type":"Text"},{"nameholder":"Note","hideLabel":true,"rest":"/instructions/payins","method":"post","mappedValue":".note","payloadPrefix":"modelInstance.instructionspayinspostv1payload","use":"PayloadProperty","isReadOnly":true,"validationExpression":{"validationType":"DATA_TYPES","selectedValidation":"ALPHANUMERIC_WITH_SPECIAL","minLength":"0","maxLength":"80","message":"Invalid data"},"customAttribute":[{"attribute":"aria-label","value":"$component.nls.Money.Note","colon":true}],"valueClasses":"''","grid":{"layout":true,"flexItemClass":"oj-sm-12 oj-md-12 oj-lg-7 item-spacing","flexItemsPad":true},"componentID":"'Note62'","type":"InputBox"}]},{"conditionalExpression":{"conditionalValue":"$baseModel.large()"},"panelContent":"Load your Futura Bank Wallet by adding money now and make payments instantaneously from your wallet, and save time.<br>You can add money by linking a bank account or through Debit/Credit Cards and manage money on your mobile phone or computer.","imgSource":"info-icon/note.svg","header":"Note","template":"request-from-wallet","valueClasses":"''","grid":{"layout":true,"flexItemClass":"oj-lg-4"},"componentID":"requestfromwallet9","type":"HelpPanel"}]},{"conditionalExpression":{"conditionalValue":"x1==='external'","selectedControllingField":["Transfer Type"]},"containerType":"NormalContainer","template":"Container","valueClasses":"''","grid":{"layout":true,"flexItemClass":"oj-sm-12 maincontainer","flexItemsPad":true},"componentID":"Container57","type":"Container","children":[{"containerType":"NormalContainer","template":"Container","valueClasses":"''","grid":{"flex":true,"layout":true,"flexItemClass":"oj-lg-8"},"componentID":"Container17","type":"Container","children":[{"nameholder":"Amount","rest":"/wallets/transfer/external","method":"post","mappedValue":".amount.amount","payloadPrefix":"modelInstance.walletstransferexternalpostv1payload","use":"PayloadProperty","stageId":"add-money-to-wallet-stage1","source":"'form-input'","isRequiredField":true,"extraDetails":"amount.currency","idAttribute":"'amount'","valueClasses":"''","grid":{"layout":true,"flexItemClass":"oj-sm-12 oj-md-12 oj-lg-6 amount-spacing","flexLabelClass":"oj-sm-12 oj-md-12 oj-lg-12","flexItemsPad":true},"componentID":"Amount27","type":"AmountInput"}]},{"conditionalExpression":{"conditionalValue":"$baseModel.large()"},"panelContent":"Add money to wallet instantly from your linked Bank Account, request funds from other wallet users or add funds using your debit/credit cards or netbanking of any other bank account. You can easily send money to your friends, recharge your phone, pay bills and much more through the amount added to your Wallet.","imgSource":"info-icon/benefits.svg","header":"Transferring money has never been easier!","template":"add-wallet-money","valueClasses":"''","grid":{"layout":true,"flexItemClass":"oj-lg-4"},"componentID":"addwalletmoney94","type":"HelpPanel"}]},{"nameholder":"My Limits","stageId":"add-money-to-wallet-stage1","containerType":"ModalWindow","template":"limitmodel","valueClasses":"''","componentID":"MyLimits32","type":"Container","children":[{"nameholder":"Channel","mappedValue":"selectedChannel","use":"ObservableVariable","stageId":"add-money-to-wallet-stage1","selectionType":"One","optionList":{"optionSource":"external","options":"accessPointsgetVar","labelKey":"description","valueKey":"id"},"hookFunctions":{"code":"self.viewLimitsModaldetails(false);\n ko.tasks.runEarly();\nself.viewLimitsModaldetails(true);"},"conditionalExpression":{"conditionalValue":"accesspointsloaded"},"valueClasses":"''","componentID":"'Channel12'","type":"SelectOne"},{"stageId":"add-money-to-wallet-stage1","selectionType":"singleComponent","conditionalExpression":{"conditionalValue":"viewLimitsModaldetails() && walletDetailsloaded()"},"loaderType":"Component","moduleName":"financial-limits","componentName":"'available-limits'","params":"rootModel: $component,type:taskCode,id:walletAccountNo(),accessPointValue:selectedChannel","template":"Loader","valueClasses":"''","componentID":"Loader70","type":"Loader"}]},{"nameholder":"Submit","selectionType":"custom","hookFunctions":{"chains":["/payments/transfers/self post Default_API v1"],"code":"setExtraParams({\n      'selfpayload':self.modelInstance.paymentstransfersselfpostv1payload,\n      'externalpayload':self.modelInstance.paymentstransfersinternalpostv1payload,\n  \t  'requestpayload':self.modelInstance.instructionspayinspostv1payload\n    });\nif(self.transfer()==='myaccounts'){\n return Hooks.paymentstransfersselfpostCall(ko.mapping.toJSON(self.modelInstance.paymentstransfersselfpostv1payload)).then(function(response){\n       if(response && response.paymentId){\n         self.paymentId(response.paymentId);\n         setExtraParams({\n      'selfpayload':self.modelInstance.paymentstransfersselfpostv1payload,\n      'externalpayload':self.modelInstance.paymentstransfersinternalpostv1payload,\n  \t  'requestpayload':self.modelInstance.instructionspayinspostv1payload,\n  \t  'paymentId':self.paymentId(),\n       'transferFromAccount':self.transferFromAdditionalDetail()['account'].id.displayValue\n    \t});\n         return true;\n      }                \n  });\n  \n}else if(self.transfer()==='request'){\n    return true;\n         \n}else if(self.transfer()==='external'){\n    return Hooks.walletstransferexternalpostCall(ko.toJSON(self.modelInstance.walletstransferexternalpostv1payload)).then(function (response) {\n                    if (response && response.paymentId) {\n\t\t\t\t\t\tself.paymentId(response.paymentId);\n\t\t\t\t\t\tconst currency=self.modelInstance.walletstransferexternalpostv1payload.amount.currency(),\n\t\t\t\t\t\tamount=self.modelInstance.walletstransferexternalpostv1payload.amount.amount();\n                        window.location.href=self.redirectionUrl() +'?merchant_id=' + self.merchantId() + '&order_id=' + self.paymentId() +'&currency=' + currency +'&amount='+ amount + '&language=en&redirect_url=' +self.successUrl() +'&cancel_url=' +self.failureUrl(); \n  return true;                  \n  }\n    });   \n  \n}\n\n"},"imgSource":"icons icon-confirm","buttonName":"primary","valueClasses":"''","slotType":"startIcon","grid":{"flexItemsPad":true},"componentID":"Submit32","type":"Contract"},{"nameholder":"Back","selectionType":"custom","imgSource":"icons icon-back-arrow","buttonName":"secondary","valueClasses":"''","slotType":"startIcon","grid":{"flexItemsPad":true},"componentID":"Back84","type":"Contract"},{"nameholder":"Cancel","selectionType":"cancel","imgSource":"icons icon-cancel","buttonName":"tertiary","valueClasses":"''","slotType":"startIcon","grid":{"flexItemsPad":true},"componentID":"Cancel10","type":"Contract"}]}]}],"reviewComponents":[{"finalRest":"{\"rests\":[\"/payments/transfers/self/{paymentId} patch Default_API v1\"],\"child\":[]}","restFlow":"[{\"rests\":[\"/instructions/payins post Default_API v1\"],\"child\":[]},{\"rests\":[\"/payments/transfers/self post Default_API v1\"],\"child\":[]}]","data":{"externalMappedParams":[],"initRests":[],"css":"","finalRestMappedParams":[{"rest":"/payments/transfers/self/{paymentId}","method":"patch","restOperation":null,"reqParams":[],"optParams":[],"payloadMap":{}}],"customNLS":"{\n  header:\"REVIEW\",\n  reviewHeader:\"You initiated a request for funds transfer to your wallet. Please review details before you confirm.\",\n  RequestMobileNumber:\"Requestee's Mobile Number\"\n}","confirmScreenDetails":{"transactionName":"Add Money to Wallet","templateName":"Review Wallet"},"header":"REVIEW","reviewHeader":"You initiated a request for funds transfer to your wallet. Please review details before you confirm.","contracts":[{"buttonName":"primary","imgSource":"icons icon-confirm","nameholder":"Confirm","selectionType":"custom","functionName":"confirm","slotType":"startIcon"},{"buttonName":"secondary","imgSource":"icons icon-back-arrow","nameholder":"Back","selectionType":"custom","functionName":"back","slotType":"startIcon"},{"buttonName":"tertiary","imgSource":"icons icon-cancel","nameholder":"Cancel","selectionType":"cancel","functionName":"cancel","slotType":"startIcon"}]},"layout":[{"nameholder":"Add money","hidePageHeading":true,"valueClasses":"''","grid":{"flexItemsPad":true},"componentID":"Addmoney60","type":"PageSection","children":[{"conditionalExpression":{"conditionalValue":"transfer==='myaccounts'"},"containerType":"NormalContainer","template":"Container","valueClasses":"''","grid":{"layout":true,"flexItemClass":"oj-sm-12 oj-md-12 oj-lg-12"},"componentID":"Container70","type":"Container","children":[{"nameholder":"Transfer From","mappedValue":"transferfromMyaccount","use":"ObservableVariable","valueClasses":"''","componentID":"TransferFrom69","type":"RowControl"},{"nameholder":"Transfer To","mappedValue":"wallet","use":"ObservableVariable","valueClasses":"''","componentID":"TransferTo75","type":"RowControl"},{"nameholder":"Amount","mappedValue":"amountToMyAccount","use":"ObservableVariable","formatter":{"currency":"walletcurrency"},"valueClasses":"''","componentID":"Amount77","type":"RowControl"},{"nameholder":"Note","mappedValue":"noteMyaccount","use":"ObservableVariable","valueClasses":"''","componentID":"Note50","type":"RowControl"}]},{"conditionalExpression":{"conditionalValue":"transfer==='request'"},"containerType":"NormalContainer","template":"Container","valueClasses":"''","grid":{"layout":true,"flexItemClass":"oj-sm-12 oj-md-12 oj-lg-12"},"componentID":"Container46","type":"Container","children":[{"nameholder":"Requestee's Mobile Number","mappedValue":"mobileNumber","use":"ObservableVariable","valueClasses":"''","componentID":"RequesteesMobileNumber44","type":"RowControl"},{"nameholder":"Amount","mappedValue":"amountToRequestMoney","use":"ObservableVariable","formatter":{"currency":"walletcurrency"},"valueClasses":"''","grid":{"layout":true},"componentID":"Amount69","type":"RowControl"},{"nameholder":"Note","mappedValue":"noteRequestaccount","use":"ObservableVariable","valueClasses":"''","componentID":"Note83","type":"RowControl"}]},{"conditionalExpression":{"conditionalValue":"transfer==='external'"},"containerType":"NormalContainer","template":"Container","valueClasses":"''","componentID":"Container48","type":"Container","children":[{"nameholder":"Amount","mappedValue":"amountToExternal","use":"ObservableVariable","formatter":{"currency":"walletcurrency"},"valueClasses":"''","componentID":"Amount38","type":"RowControl"}]},{"nameholder":"Confirm","selectionType":"custom","hookFunctions":{"chains":["/instructions/payins post Default_API v1"],"code":"if(self.transfer==='myaccounts'){\n   Hooks.paymentstransfersselfpaymentIdpatchCall(self.paymentId).then(function(response){\n                        params.dashboard.loadComponent(\"confirm-screen\", {\n                                transactionResponse: response,\n                                transactionName: self.nls.transactionName,\n                                hostReferenceNumber: response.externalReferenceId,\n                                favorite: true,\n                                model: self.model,\n                                paymentId : self.paymentId,\n                                payeeId : self.payeeId,\n                                transactionType: \"SELFFT\",\n                         \t    confirmScreenExtensions: {\n                                    isSet: true,\n                        \t\t\ttaskCode: \"PC_F_SFT\",\n                                    confirmScreenDetails: self.confirmScreenDetailsArray,\n                                    template: \"confirm-screen/payments-template\"\n                                },\n                                confirmationType:{version:\"v1\",name: null}\n                               });})\n}else if(self.transfer==='request'){\n  Hooks.instructionspayinspostCall(ko.mapping.toJSON(self.requestpayload)).then(function(response){\n                              params.dashboard.loadComponent(\"confirm-screen\", {\n                                transactionResponse: response,\n                                transactionName: self.nls.transactionName,\n                                favorite: true,\n                                hostReferenceNumber: response.externalReferenceId,\n                                confirmScreenExtensions: {\n                                    isSet: true,\n                                    taskCode: \"PC_F_ITF\",\n                                    confirmScreenDetails: self.confirmScreenDetailsArray,\n                                    template: \"confirm-screen/payments-template\"\n                                },\n                                confirmationType:{version:\"v1\",name: null}\n                               });})\n}"},"imgSource":"icons icon-confirm","buttonName":"primary","valueClasses":"''","slotType":"startIcon","grid":{"flexItemsPad":true},"componentID":"Confirm52","type":"Contract"},{"nameholder":"Back","selectionType":"custom","imgSource":"icons icon-back-arrow","buttonName":"secondary","valueClasses":"''","slotType":"startIcon","grid":{"flexItemsPad":true},"componentID":"Back91","type":"Contract"},{"nameholder":"Cancel","selectionType":"cancel","imgSource":"icons icon-cancel","buttonName":"tertiary","valueClasses":"''","slotType":"startIcon","grid":{"flexItemsPad":true},"componentID":"Cancel69","type":"Contract"}]}]}],"confirmationComponents":[]}