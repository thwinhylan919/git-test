<div class="form-main-container">
    <!-- ko if:$component.structureDetailsLoaded() -->
    <!-- ko if:$component.mode() === "review" -->
    <div data-bind="template: { name: 'review-screen/review-banner-template', data: {header : $component.resources.generic.common.review , reviewHeader : $component.resources.structureDetail.messages.review}}"></div>
    <!-- /ko -->
    <!-- ko if:$component.mode() === "edit" -->
    <div data-bind="template: { name: 'review-screen/review-banner-template', data: {header : $component.resources.generic.common.review , reviewHeader : $component.resources.structureDetail.messages.edit}}"></div>
    <!-- /ko -->
    <!-- ko if:$component.mode() === "Resumed" -->
    <div data-bind="template: { name: 'review-screen/review-banner-template', data: {header : $component.resources.generic.common.review , reviewHeader : $component.resources.structureDetail.messages.paused}}"></div>
    <!-- /ko -->
    <!-- ko if:$component.mode() === "Paused" -->
    <div data-bind="template: { name: 'review-screen/review-banner-template', data: {header : $component.resources.generic.common.review , reviewHeader : $component.resources.structureDetail.messages.resumed}}"></div>
    <!-- /ko -->
    <!-- ko if:$component.mode() === "execute" -->
    <div data-bind="template: { name: 'review-screen/review-banner-template', data: {header : $component.resources.generic.common.review , reviewHeader : $component.resources.structureDetail.messages.execute}}"></div>
    <!-- /ko -->
    <!-- /ko -->
    <div class="oj-flex oj-flex-items-pad oj-lg-12 structure-details-banner top-data">
        <div class="oj-flex-item oj-lg-11">
            <div class="oj-flex oj-flex-items-pad" data-bind="with : $component.structureDetails()">
                <div class="oj-flex-item oj-lg-12 label" data-bind="text:structureKey.structureId">
                </div>
                <div class="oj-flex-item oj-lg-12">
                    <span class="description" data-bind="text:desc"></span>
                    <span data-bind="text:$component.resources.structure.type[structureType]"></span>
                </div>
            </div>
        </div>
        <div class="oj-flex-item vertical-align-middle no-pad-cols right">
            <a href="#" data-bind="attr:{alt:$component.resources.structure.treeView,
                    title:$component.resources.structure.treeViewTitlemsg},click:$component.setTreeView">
                <span class="icons icon-tree"></span>
            </a>
        </div>
        <div class="oj-flex-item vertical-align-middle no-pad-cols right">
            <a href="#" data-bind="attr:{id:'tableView', alt:$component.resources.structure.tabularView,
                    title:$component.resources.structure.tableViewTitlemsg},click:$component.setTabularView">
                <span class="icons icon-tabular-view"></span>
            </a>
        </div>
        <!-- ko ifnot:$component.mode() === "approval" || $component.mode() === "review" || $component.mode() === "edit" || $component.mode() === 'Paused' || $component.mode() === 'Resumed' || $component.mode() === 'execute' -->
        <div class="oj-flex-item vertical-align-middle no-pad-cols right">
            <a href="#" data-bind="attr:{id:'menuLauncher-viewdetails',alt:$component.resources.structure.options,
                    title:$component.resources.structure.moreOptions},click:$component.openMenu">
                <span class="icons icon-more"></span>
            </a>
        </div>
        <!-- /ko -->
        <!-- ko if: $component.mode() !== 'view' -->
        <div class="oj-flex-item vertical-align-middle no-pad-cols right">
            <a href="#" data-bind="attr:{id:'detailView', alt:$component.resources.structureDetail.labels.detailView,
                title:$component.resources.structureDetail.labels.detailViewTitle},click:$component.detailView">
                <span class="icons icon-eye"></span>
            </a>
        </div>
        <!-- /ko -->
    </div>
    <oj-menu id="myMenu1" class="hide" slot="menu" on-oj-action="[[menuItemAction]]" open-options.launcher="menuLauncher-viewdetails">
        <!-- ko foreach: $component.menuItems -->
        <oj-option data-bind="attr: {id: id, value: id}">
            <span slot="startIcon" data-bind="css: icon"></span>
            <span data-bind="text: label"></span>
        </oj-option>
        <!-- /ko -->
    </oj-menu>
    <!-- ko if:$component.structureDetailsLoaded() && $component.viewas() === "tree" && $component.isIEBrowser() -->
    <div class="oj-flex oj-flex-items-pad">
        <div class="oj-flex-item oj-lg-12 ie-text__header" data-bind="text:$component.resources.structure.browserMessages.browserNotSupported"></div>
        <div class="oj-flex-item oj-lg-12 ie-text__detail-message" data-bind="text:$component.resources.structure.browserMessages.browserMessageDetail"></div>
        <div class="oj-flex-item oj-lg-12">
            <div class="oj-flex oj-flex-items-pad ">
                <ul class="confirm-screen__list">
                    <li>
                        <img data-bind="attr:{'title':$component.resources.structure.browserMessages.edgeTitle,'alt':$component.resources.structure.browserMessages.edge},loadImage:'lm/edge.svg'">
                        <div data-bind="text:$component.resources.structure.browserMessages.edge"></div>
                    </li>
                    <li>
                        <img data-bind="attr:{'title':$component.resources.structure.browserMessages.firefoxTitle,'alt':$component.resources.structure.browserMessages.firefox},loadImage:'lm/firefox.svg'">
                        <div data-bind="text:$component.resources.structure.browserMessages.firefox"></div>
                    </li>
                    <li>
                        <img data-bind="attr:{'title':$component.resources.structure.browserMessages.chromeTitle,'alt':$component.resources.structure.browserMessages.chrome},loadImage:'lm/chrome.svg'">
                        <div data-bind="text:$component.resources.structure.browserMessages.chrome"></div>
                    </li>
                    <li>
                        <img data-bind="attr:{'title':$component.resources.structure.browserMessages.safariTitle,'alt':$component.resources.structure.browserMessages.safari},loadImage:'lm/safari.svg'">
                        <div data-bind="text:$component.resources.structure.browserMessages.safari"></div>
                    </li>
                </ul>
            </div>
        </div>
        <div class="oj-flex-item help-item center">
            <a href="#" data-bind="attr:{id:'tableView1', alt:$component.resources.structure.tabularView,
                    title:$component.resources.structure.tableViewTitlemsg},click:$component.setTabularView">
                <span data-bind="text:$component.resources.structure.browserMessages.switchTabularView"></span>
            </a>
        </div>
    </div>
    <!-- /ko -->
    <!-- ko if:$component.structureDetailsLoaded() && $component.viewas() === "tree" && !($component.isIEBrowser()) -->
    <tree-view class="structure" data-bind="css : ($component.mode && ($component.mode() ==='approval' || $component.mode() === 'review' || $component.mode() === 'edit')) ? 'structure__tree-width' : ''" params="
         treeDetails :$component.structureDetails().accountlst,
         id:'structureId',
         maxChildNodesToRender : 8,
         linkClickHandler:$component.linkClicked,
         moreClickHandler:$component.setTabularView,
         linkShortDescValue:'cashCCMethod',
         nodeShortDescValue:'accountDetails.accountKey.accountNo.displayValue',
         nodeIdjsonPath:'accountDetails.accountKey.accountNo.value',
         moreNodeSvgColor : {
             lhsKey : 'cashCCMethod',
             conditions : [{
                rhs : 'Sweep',
                value :'structureFillSweep'
            },{
                rhs : 'Pool',
                value :'structureFillPool'
            }]
         },
         treePanning:'auto',
         treeZooming:'auto',
         width:240,
         height:120,
         overViewRenderer:'on',
         rootModel : $component,
         baseModel:$baseModel">
        <div class="oj-flex oj-flex-items-pad structure__node" data-bind="css : $data.nodeData.level ? (($data.nodeData.cashCCMethod === 'Sweep') ? 'structure__structureFill__structureFillSweep structure__structureFill':'structure__structureFill__structureFillPool structure__structureFill') :  (($component.cashCCMethod() === 'Sweep') ? 'structure__structureFillParent__structureFillSweep structure__structureFillParent': 'structure__structureFillParent__structureFillPool structure__structureFillParent') ">
            <!-- ko ifnot:$data.nodeData.level -->
            <!-- ko if:$component.cashCCMethod() === 'Sweep' || $data.nodeData.accountDetails.notionalAccFlag === "Y" -->
            <div class="oj-flex-item oj-lg-10 structure__nodeHeader" data-bind="text:$data.nodeData.accountDetails.customerDesc || $component.customerDesc"></div>
            <div class="oj-flex-item oj-lg-12 structure__nodeData" data-bind="text:$data.nodeData.accountDetails.accountDesc"></div>
            <div class="oj-flex-item structure__nodeData oj-lg-12">
                <span data-bind="text:$data.nodeData.accountDetails.accountKey.accountNo.displayValue"></span>
                <span class="structure__accountType tags" data-bind="text : $component.resources.structureDetail.labels.accountCheck[$data.nodeData.accountDetails.isExtAccChk]">
                </span>
            </div>
            <div class="oj-flex-item oj-lg-12 structure__nodeData" data-bind="text:$formatter.formatCurrency($data.nodeData.accountDetails.currentBalance, $data.nodeData.accountDetails.accountKey.ccyId)"></div>
            <!-- /ko -->
            <!-- ko if:$component.cashCCMethod() !== 'Sweep' && $data.nodeData.accountDetails.notionalAccFlag !== "Y" -->
            <div class="oj-flex-item oj-lg-10 structure__nodeHeader" data-bind="text:$data.nodeData.accountDetails.customerDesc || $component.customerDesc"></div>
            <div class="oj-flex-item oj-lg-12 structure__nodeData" data-bind="text:$data.nodeData.accountDetails.accountDesc"></div>
            <div class="oj-flex-item oj-lg-12 structure__nodeData" data-bind="text:$data.nodeData.accountDetails.accountKey.accountNo.displayValue"></div>
            <div class="oj-flex-item oj-lg-12 structure__nodeData" data-bind="text : $baseModel.format($component.resources.structure.currency,{currencyCode : ko.utils.unwrapObservable($data.nodeData.accountDetails.accountKey.ccyId)})"></div>
            <div class="oj-flex-item oj-lg-12 structure__nodeData" data-bind="text : $baseModel.format($component.resources.structure.branch,{branchCode : ko.utils.unwrapObservable($data.nodeData.accountDetails.accountKey.branchCode)})"></div>
            <!-- /ko -->
            <!-- /ko -->
            <!-- ko if:$data.nodeData.level -->
            <div class="oj-flex-item oj-lg-10 structure__nodeHeader" data-bind="text:$data.nodeData.accountDetails.customerDesc || $component.customerDesc"></div>
            <div class="oj-flex-item oj-lg-12" data-bind="text:$data.nodeData.accountDetails.accountDesc"></div>
            <div class="oj-flex-item oj-lg-12">
                <span data-bind="text:$data.nodeData.accountDetails.accountKey.accountNo.displayValue"></span>
                <span class="structure__accountType tags" data-bind="text : $component.resources.structureDetail.labels.accountCheck[$data.nodeData.accountDetails.isExtAccChk]">
                </span>
            </div>
            <div class="oj-flex-item oj-lg-8" data-bind="text:$formatter.formatCurrency($data.nodeData.accountDetails.currentBalance,$data.nodeData.accountDetails.accountKey.ccyId)"></div>
            <!-- ko if:$data.nodeData.instructionPriority -->
            <div class="oj-flex-item oj-lg-4 right priority" data-bind="text:$baseModel.format($component.resources.structure.priority,{
        number :$data.nodeData.instructionPriority})"></div>
            <!-- /ko -->
            <!-- /ko -->
        </div>
    </tree-view>
    <!-- /ko -->
    <!-- ko if:$component.structureDetailsLoaded() && $component.viewas() === "table" -->
    <view-structure-tabular params="structureDetails : structureDetails , tabularData : structureDetails().accountlst, customerDesc : $component.customerDesc, mode : mode, rootModel : $component, dashboard : $dashboard, baseModel:$baseModel">
    </view-structure-tabular>
    <!-- /ko -->
    <!-- ko if:$component.mode() === "view" || $component.mode() === 'edit' || $component.mode() === 'Paused' || $component.mode() === 'Resumed' || $component.mode() === 'execute' || $component.mode() ==="review" -->
    <div class="oj-flex-item button-container">
        <!-- ko if:$component.mode() !== "view" -->
        <oj-button class="action-button-primary" id="confirm-button" on-click="[[$component.confirm]]">
            <span slot="startIcon" class="icons icon-confirm"></span>
            <span data-bind="text: $component.resources.generic.common.confirm"></span>
        </oj-button>
        <!-- /ko -->
        <oj-button class="action-button-secondary" id="cancelButton" on-click="[[$dashboard.switchModule.bind($data, null)]]">
            <span slot="startIcon" class="icons icon-cancel"></span>
            <span data-bind="text: $component.resources.generic.common.cancel"></span>
        </oj-button>
        <!-- ko if:$component.mode() === 'Paused' || $component.mode() === 'Resumed' || $component.mode() === 'execute' -->
        <oj-button class="action-button-tertiary" id="button-back" on-click="[[$component.back]]">
            <span class="icons icon-back-arrow" slot="startIcon"></span>
            <span data-bind="text:$component.resources.generic.common.back"></span>
        </oj-button>
        <!-- /ko -->
        <!-- ko if:$component.mode() === "view" -->
        <oj-button class="action-button-tertiary" id="button-back" on-click="[[$dashboard.loadComponent.bind($data,'list-structure')]]">
            <span class="icons icon-back-arrow" slot="startIcon"></span>
            <span data-bind="text:$component.resources.generic.common.back"></span>
        </oj-button>
        <!-- /ko -->
        <!-- ko ifnot:$component.mode() === 'Paused' || $component.mode() === 'Resumed' || $component.mode() === 'execute' || $component.mode() === "view" -->
        <oj-button class="action-button-tertiary" id="button-back" on-click="[[$dashboard.hideDetails]]">
            <span class="icons icon-back-arrow" slot="startIcon"></span>
            <span data-bind="text:$component.resources.generic.common.back"></span>
        </oj-button>
        <!-- /ko -->
    </div>
    <!-- /ko -->
</div>
<modal-window params="baseModel : $baseModel, rootModel : $data, id:'passwordDialog', header : $component.resources.structure.passwordNotification">
    <div class="oj-flex oj-flex-items-pad">
        <div class="oj-flex-item">
            <span data-bind="text: $component.resources.structure.passCombination"></span>
        </div>
    </div>
    <div class="oj-flex oj-flex-items-pad">
        <div class="oj-flex-item">
            <span data-bind="text: $component.resources.structure.passwordExample"></span>
        </div>
    </div>
    <div class="oj-flex button-container">
        <oj-button id="passwordDialog-button-ok" class="action-button-primary" on-click="[[$component.closeModal]]">
            <span data-bind="text:$component.resources.generic.common.ok"></span>
        </oj-button>
    </div>
</modal-window>